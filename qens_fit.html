<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Python: module qens_fit</title>
</head><body>

<table class="heading">
<tr class="heading-text decor">
<td class="title">&nbsp;<br><strong class="title">qens_fit</strong></td>
<td class="extra"><a href=".">index</a><br><a href="file:c%3A%5Cusers%5Ccalio%5Cdocuments%5Cmy_scripts%5Cqens_fit.py">c:\users\calio\documents\my_scripts\qens_fit.py</a></td></tr></table>
    <p><span class="code">Created&nbsp;on&nbsp;Thu&nbsp;Sep&nbsp;26&nbsp;16:09:16&nbsp;2024<br>
&nbsp;<br>
@author:&nbsp;Antonio&nbsp;Cali√≤<br>
&nbsp;<br>
A&nbsp;little&nbsp;library&nbsp;that&nbsp;enables&nbsp;easy&nbsp;fitting&nbsp;of&nbsp;QENS&nbsp;data.<br>
&nbsp;<br>
USAGE:<br>
&nbsp;<br>
-&nbsp;Use&nbsp;LoadAscii&nbsp;to&nbsp;load&nbsp;data&nbsp;reduced&nbsp;with&nbsp;Mantid,&nbsp;or&nbsp;load&nbsp;your&nbsp;data&nbsp;another<br>
way&nbsp;and&nbsp;then&nbsp;wrap&nbsp;it&nbsp;in&nbsp;a&nbsp;<a href="#QENSDataset">QENSDataset</a>&nbsp;instance.&nbsp;Loading&nbsp;of&nbsp;multiple&nbsp;datasets<br>
is&nbsp;supported.<br>
&nbsp;<br>
-&nbsp;Define&nbsp;your&nbsp;model&nbsp;function&nbsp;to&nbsp;fit&nbsp;the&nbsp;data.&nbsp;Constants&nbsp;are&nbsp;also&nbsp;supported.<br>
&nbsp;<br>
-&nbsp;Declare&nbsp;a&nbsp;list&nbsp;of&nbsp;<a href="#Parameter">Parameter</a>&nbsp;obejcts&nbsp;to&nbsp;control&nbsp;their&nbsp;initial&nbsp;value,&nbsp;bounds,<br>
and&nbsp;whether&nbsp;the&nbsp;parameter&nbsp;is&nbsp;fixed&nbsp;and/or&nbsp;global.<br>
&nbsp;<br>
-&nbsp;Declare&nbsp;a&nbsp;model&nbsp;instance&nbsp;using&nbsp;the&nbsp;function&nbsp;you&nbsp;wrote&nbsp;before&nbsp;as&nbsp;the&nbsp;target,<br>
and&nbsp;feed&nbsp;it&nbsp;the&nbsp;list&nbsp;of&nbsp;<a href="#Parameter">Parameter</a>&nbsp;objects&nbsp;and&nbsp;the&nbsp;<a href="#QENSDataset">QENSDataset</a>.<br>
&nbsp;<br>
-&nbsp;Run&nbsp;the&nbsp;fit.<br>
&nbsp;<br>
-&nbsp;Plot&nbsp;fits&nbsp;and&nbsp;parameters,&nbsp;and&nbsp;Save&nbsp;your&nbsp;results.</span></p>
<p>
<table class="section">
<tr class="decor pkg-content-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Modules</strong></td></tr>
    
<tr><td class="decor pkg-content-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><table><tr><td class="multicolumn"><a href="copy.html">copy</a><br>
<a href="glob.html">glob</a><br>
</td><td class="multicolumn"><a href="inspect.html">inspect</a><br>
<a href="numpy.html">numpy</a><br>
</td><td class="multicolumn"><a href="os.html">os</a><br>
<a href="pandas.html">pandas</a><br>
</td><td class="multicolumn"><a href="matplotlib.pyplot.html">matplotlib.pyplot</a><br>
<a href="re.html">re</a><br>
</td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor index-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Classes</strong></td></tr>
    
<tr><td class="decor index-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl>
<dt class="heading-text"><a href="builtins.html#object">builtins.object</a>
</dt><dd>
<dl>
<dt class="heading-text"><a href="qens_fit.html#Model">Model</a>
</dt><dt class="heading-text"><a href="qens_fit.html#ParList">ParList</a>
</dt><dt class="heading-text"><a href="qens_fit.html#Parameter">Parameter</a>
</dt><dt class="heading-text"><a href="qens_fit.html#QENSDataset">QENSDataset</a>
</dt><dt class="heading-text"><a href="qens_fit.html#QENSResult">QENSResult</a>
</dt></dl>
</dd>
</dl>
 <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="Model">class <strong>Model</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#Model">Model</a>(func:&nbsp;&amp;lt;built-in&nbsp;function&nbsp;callable&amp;gt;,&nbsp;parlist:&nbsp;list,&nbsp;datasets:&nbsp;dict&nbsp;=&nbsp;None,&nbsp;**kwargs)<br>
&nbsp;<br>
<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="Model-__init__"><strong>__init__</strong></a>(self, func: &lt;built-in function callable&gt;, parlist: list, datasets: dict = None, **kwargs)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="Model-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="Model-plot_fits"><strong>plot_fits</strong></a>(self, data_only=False, xlabel: str = 'E (meV)', ylabel: str = 'Scattering Intensity (A.U.)', **plt_kw)</dt></dl>

<dl><dt><a name="Model-plot_par"><strong>plot_par</strong></a>(self, index='q', x_title='$q\\ (\\AA^{-1})$', x_title_glob='$T\\ (K)$', **pltpar_kw)</dt></dl>

<dl><dt><a name="Model-run_fit"><strong>run_fit</strong></a>(self)</dt></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="ParList">class <strong>ParList</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#ParList">ParList</a>(parlist=[],&nbsp;curves=1)<br>
&nbsp;<br>
<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="ParList-__getitem__"><strong>__getitem__</strong></a>(self, index)</dt></dl>

<dl><dt><a name="ParList-__init__"><strong>__init__</strong></a>(self, parlist=[], curves=1)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="ParList-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="ParList-__str__"><strong>__str__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;str(self).</span></dd></dl>

<dl><dt><a name="ParList-add_par"><strong>add_par</strong></a>(self, par)</dt></dl>

<dl><dt><a name="ParList-all_to_df"><strong>all_to_df</strong></a>(self, index=None, index_title=None)</dt></dl>

<dl><dt><a name="ParList-all_to_df_noerr"><strong>all_to_df_noerr</strong></a>(self)</dt></dl>

<dl><dt><a name="ParList-free_to_df"><strong>free_to_df</strong></a>(self, index=None, index_title=None)</dt></dl>

<dl><dt><a name="ParList-global_to_df"><strong>global_to_df</strong></a>(self, index=[1], index_title=None)</dt></dl>

<dl><dt><a name="ParList-pack_errors"><strong>pack_errors</strong></a>(self, vector: numpy.ndarray)</dt></dl>

<dl><dt><a name="ParList-pack_values"><strong>pack_values</strong></a>(self, vector: numpy.ndarray)</dt></dl>

<dl><dt><a name="ParList-unpack_bounds"><strong>unpack_bounds</strong></a>(self)</dt></dl>

<dl><dt><a name="ParList-unpack_errors"><strong>unpack_errors</strong></a>(self)</dt></dl>

<dl><dt><a name="ParList-unpack_pin"><strong>unpack_pin</strong></a>(self)</dt></dl>

<dl><dt><a name="ParList-unpack_values"><strong>unpack_values</strong></a>(self)</dt></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="Parameter">class <strong>Parameter</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#Parameter">Parameter</a>(name:&nbsp;str,&nbsp;value_0:&nbsp;float,&nbsp;low_bound:&nbsp;float&nbsp;=&nbsp;None,&nbsp;high_bound:&nbsp;float&nbsp;=&nbsp;None,&nbsp;is_fixed:&nbsp;bool&nbsp;=&nbsp;False,&nbsp;is_global:&nbsp;bool&nbsp;=&nbsp;False,&nbsp;ax_name:&nbsp;str&nbsp;=&nbsp;None)<br>
&nbsp;<br>
Object&nbsp;that&nbsp;basicaly&nbsp;reimplements&nbsp;a&nbsp;float&nbsp;(with&nbsp;all&nbsp;its&nbsp;implicit<br>
methods)&nbsp;with&nbsp;added&nbsp;attributes&nbsp;to&nbsp;make&nbsp;it&nbsp;fit-compatible.<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="Parameter-__add__"><strong>__add__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__eq__"><strong>__eq__</strong></a>(self, other)</dt><dd><span class="code">Return&nbsp;self==value.</span></dd></dl>

<dl><dt><a name="Parameter-__ge__"><strong>__ge__</strong></a>(self, other)</dt><dd><span class="code">Return&nbsp;self&gt;=value.</span></dd></dl>

<dl><dt><a name="Parameter-__getitem__"><strong>__getitem__</strong></a>(self, index)</dt></dl>

<dl><dt><a name="Parameter-__gt__"><strong>__gt__</strong></a>(self, other)</dt><dd><span class="code">Return&nbsp;self&gt;value.</span></dd></dl>

<dl><dt><a name="Parameter-__iadd__"><strong>__iadd__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__imul__"><strong>__imul__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__init__"><strong>__init__</strong></a>(self, name: str, value_0: float, low_bound: float = None, high_bound: float = None, is_fixed: bool = False, is_global: bool = False, ax_name: str = None)</dt><dd><span class="code">Initialises&nbsp;the&nbsp;<a href="#Parameter">Parameter</a>&nbsp;instance<br>
&nbsp;<br>
Parameters<br>
----------<br>
name&nbsp;:&nbsp;str<br>
&nbsp;&nbsp;&nbsp;&nbsp;Name&nbsp;of&nbsp;the&nbsp;parameter.<br>
value_0&nbsp;:&nbsp;float&nbsp;or&nbsp;list&nbsp;or&nbsp;np.ndarray<br>
&nbsp;&nbsp;&nbsp;&nbsp;Initial&nbsp;value.<br>
low_bound&nbsp;:&nbsp;float&nbsp;or&nbsp;list&nbsp;or&nbsp;np.ndarray,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Lower&nbsp;bound.&nbsp;The&nbsp;default&nbsp;is&nbsp;None,&nbsp;which&nbsp;will&nbsp;imply&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;unbounded&nbsp;parameter<br>
high_bound&nbsp;:&nbsp;float&nbsp;or&nbsp;list&nbsp;or&nbsp;np.ndarray,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Upper&nbsp;bound.&nbsp;The&nbsp;default&nbsp;is&nbsp;None,&nbsp;which&nbsp;will&nbsp;imply&nbsp;an<br>
&nbsp;&nbsp;&nbsp;&nbsp;unbounded&nbsp;parameter<br>
is_fixed&nbsp;:&nbsp;bool,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Used&nbsp;to&nbsp;fix&nbsp;a&nbsp;parameter.&nbsp;The&nbsp;default&nbsp;is&nbsp;False.<br>
is_global&nbsp;:&nbsp;bool,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;Used&nbsp;to&nbsp;make&nbsp;a&nbsp;parameter&nbsp;global.&nbsp;The&nbsp;default&nbsp;is&nbsp;False.<br>
ax_name&nbsp;:&nbsp;str,&nbsp;optional<br>
&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;that&nbsp;will&nbsp;appear&nbsp;as&nbsp;axis&nbsp;label&nbsp;when&nbsp;the&nbsp;parameter&nbsp;is<br>
&nbsp;&nbsp;&nbsp;&nbsp;plotted,&nbsp;supports&nbsp;LaTeX.&nbsp;The&nbsp;default&nbsp;is&nbsp;None.<br>
&nbsp;<br>
Returns<br>
-------<br>
None.</span></dd></dl>

<dl><dt><a name="Parameter-__ipow__"><strong>__ipow__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__is___"><strong>__is___</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__is_not__"><strong>__is_not__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__isub__"><strong>__isub__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__itruediv__"><strong>__itruediv__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__le__"><strong>__le__</strong></a>(self, other)</dt><dd><span class="code">Return&nbsp;self&lt;=value.</span></dd></dl>

<dl><dt><a name="Parameter-__lt__"><strong>__lt__</strong></a>(self, other)</dt><dd><span class="code">Return&nbsp;self&lt;value.</span></dd></dl>

<dl><dt><a name="Parameter-__mul__"><strong>__mul__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__ne__"><strong>__ne__</strong></a>(self, other)</dt><dd><span class="code">Return&nbsp;self!=value.</span></dd></dl>

<dl><dt><a name="Parameter-__pow__"><strong>__pow__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__radd__"><strong>__radd__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="Parameter-__rmul__"><strong>__rmul__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__rpow__"><strong>__rpow__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__rsub__"><strong>__rsub__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__rtruediv__"><strong>__rtruediv__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__setitem__"><strong>__setitem__</strong></a>(self, index, other)</dt></dl>

<dl><dt><a name="Parameter-__sub__"><strong>__sub__</strong></a>(self, other)</dt></dl>

<dl><dt><a name="Parameter-__truediv__"><strong>__truediv__</strong></a>(self, other)</dt></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
<hr>
Data and other attributes defined here:<br>
<dl><dt><strong>__hash__</strong> = None</dl>

</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="QENSDataset">class <strong>QENSDataset</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#QENSDataset">QENSDataset</a>(name:&nbsp;str&nbsp;=&nbsp;'_',&nbsp;x=[],&nbsp;y=[],&nbsp;dy=[],&nbsp;q=[])<br>
&nbsp;<br>
<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="QENSDataset-__init__"><strong>__init__</strong></a>(self, name: str = '_', x=[], y=[], dy=[], q=[])</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="QENSDataset-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table> <p>
<table class="section">
<tr class="decor title-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><a name="QENSResult">class <strong>QENSResult</strong></a>(<a href="builtins.html#object">builtins.object</a>)</td></tr>
    
<tr><td class="decor title-decor" rowspan=2><span class="code">&nbsp;&nbsp;&nbsp;</span></td>
<td class="decor title-decor" colspan=2><span class="code"><a href="#QENSResult">QENSResult</a>(name:&nbsp;str&nbsp;=&nbsp;'_',&nbsp;x:&nbsp;numpy.ndarray&nbsp;=&nbsp;None,&nbsp;y:&nbsp;numpy.ndarray&nbsp;=&nbsp;None,&nbsp;params:&nbsp;qens_fit.<a href="#ParList">ParList</a>&nbsp;=&nbsp;None,&nbsp;chisq:&nbsp;float&nbsp;=&nbsp;None,&nbsp;popt:&nbsp;numpy.ndarray&nbsp;=&nbsp;None,&nbsp;pcov:&nbsp;numpy.ndarray&nbsp;=&nbsp;None,&nbsp;infodict:&nbsp;dict&nbsp;=&nbsp;None,&nbsp;mesg:&nbsp;str&nbsp;=&nbsp;None,&nbsp;ier:&nbsp;int&nbsp;=&nbsp;None,&nbsp;residuals:&nbsp;numpy.ndarray&nbsp;=&nbsp;None)<br>
&nbsp;<br>
<br>&nbsp;</span></td></tr>
<tr><td>&nbsp;</td>
<td class="singlecolumn">Methods defined here:<br>
<dl><dt><a name="QENSResult-__init__"><strong>__init__</strong></a>(self, name: str = '_', x: numpy.ndarray = None, y: numpy.ndarray = None, params: qens_fit.ParList = None, chisq: float = None, popt: numpy.ndarray = None, pcov: numpy.ndarray = None, infodict: dict = None, mesg: str = None, ier: int = None, residuals: numpy.ndarray = None)</dt><dd><span class="code">Initialize&nbsp;self.&nbsp;&nbsp;See&nbsp;help(type(self))&nbsp;for&nbsp;accurate&nbsp;signature.</span></dd></dl>

<dl><dt><a name="QENSResult-__repr__"><strong>__repr__</strong></a>(self)</dt><dd><span class="code">Return&nbsp;repr(self).</span></dd></dl>

<dl><dt><a name="QENSResult-print_result"><strong>print_result</strong></a>(self, index=None, index_title=None)</dt></dl>

<hr>
Data descriptors defined here:<br>
<dl><dt><strong>__dict__</strong></dt>
<dd><span class="code">dictionary&nbsp;for&nbsp;instance&nbsp;variables</span></dd>
</dl>
<dl><dt><strong>__weakref__</strong></dt>
<dd><span class="code">list&nbsp;of&nbsp;weak&nbsp;references&nbsp;to&nbsp;the&nbsp;object</span></dd>
</dl>
</td></tr></table></td></tr></table><p>
<table class="section">
<tr class="decor functions-decor heading-text">
<td class="section-title" colspan=3>&nbsp;<br><strong class="bigsection">Functions</strong></td></tr>
    
<tr><td class="decor functions-decor"><span class="code">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td><td>&nbsp;</td>
<td class="singlecolumn"><dl><dt><a name="-load_ascii"><strong>load_ascii</strong></a>(filename: str, sep: str = ',', index_list: list = [])</dt></dl>
</td></tr></table>
</body></html>